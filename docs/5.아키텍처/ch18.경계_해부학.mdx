---
sidebar_position: 4
---

# 18장 경계 해부학

- 시스템 아키텍처는 일련의 소프트웨어 컴포넌트와 그 컴포넌트를 분리하는 경계에 의해 정의된다. 이러한 경계는 다양한 형태로 나타난다.

## 18-1. 단일체

- 아키텍처 경계 중에서 가장 단순하며 가장 흔한형태이며 물리적으로 엄격하게 구분되지 않은 형태이다. 이 형태는 함수와 데이터가 단일 프로세서에서 같은 주소 공간을 공유하며 나름의 규칙에 따라 분리되어 있을 뿐이다.
- 배포관점에서 보면 ‘단일체 (모노리틱 monolith)’ 라고 불리는 단일 실행 파일에 지나지 않는다. 고로 단일체는 경계가 드러나지 않는다.
- 하나의 단일 실행파일이나 그 안에 포함된 다양한 컴포넌트를 개발하고 독립적으로 수행할 수 있게 하는 일은 가치있는 일이다.
- 동적 다형성에 의존하여 내부 의존성을 관리하며 이는 객체 지향 개발의 중요한 패러다임이 되었다.
- 단일체에서 컴포넌트 간 통신은 전형적인 함수 호출에 지나지 않아 매우 빈번하며 빠르고 값싸다.

## 18-2. 배포형 컴포넌트

- 가장 단순한 형태는 동적 링크 라이브러리이다.
- 예) ruby의 gem, npm 등의 공유 라이브러리.
- 컴포넌트를 이 형태로 배포하면 따로 컴파일 하지 않고 곧바로 사용할 수 있다.
- 단일체와 마찬가지로 배포형 컴포넌트의 경계를 가로지르는 통신은 순전히 함수 호출에 지나지 않으므로 매우 값싸다.

## 18-3. 스레드

- 단일체와 배포형 컴포넌트는 모두 스레드를 활용할 수 있다.
- 스레드는 아키텍처 경계나 배포단위가 아니다. 스레드는 실행 계획과 순서를 체계화 하는 방법에 가까우며 모든 스레드가 단 하나의 컴포넌트에 포함될 수 있고, 많은 컴포넌트에 분산 될 수 있다.

## 18-4. 로컬 프로세스

- 훨씬 강한 물리적 형태를 띠는 아키텍처 경계이다.
- 로컬 프로세스들은 동일한 프로세서 또는 하나의 멀티 코어 시스템에 속한 여러 프로세서들에서 실행되지만 각각이 독립된 주소 공간에서 실행된다.
- 대개의 경우 소켓이나 메일박스, 메시지 큐와 같이 운영체제에서 제공하는 통신 기능을 이용하여 서로 통신한다.
- 각 로컬 프로세스는 정적으로 링크된 단일체이거나 동적으로 링크된 어려개의 컴포넌트로 구성될 수 있다.
- 로컬 프로세스를 일종의 최상위 컴포넌트라고 생각하자.
- 로컬 프로세스 경계를 지나는 통신에는 운영체제 호출, 데이터 마샬링 및 언마샬링 등이 있으며 이들은 제법 비싼 작업에 속한다. 따라서 통신이 너무 빈번하게 이뤄지지 않도록 신중하게 제한해야한다.

## 18-5. 서비스

- 물리적인 형태를 띠는 가장 강력한 경계는 ‘서비스’이다.
- 서비스 경계를 지나는 통신은 함수 호출에 비해 매우 느리며 전체 소요 시간이 수십 밀리초에서 수 초까지 걸릴 수 있다. 따라서 주의를 기울여서, 가능하다면 빈번하게 통신하는 일을 피해야 한다.

## 18-6. 결론

- 단일체를 제외한 대다수의 시스템은 한 가지 이상의 경계전략을 사용한다.
- 한 시스템 안에서도 통신이 빈번한 로컬 경게와 지연을 중요하게 고려해야하는 경계가 혼합되어 있을 수 있다.
