---
sidebar_position: 3
---

# 17장 경계: 선 긋기

- 소프트웨어 아키텍처는 선을 긋는 기술이다.
- 저자는 이러한 선을 ‘경계 boundary’라고 부른다. 경계는 소프트웨어 요소를 서로 분리하고, 경계 한 편에 있는 요소가 반대편에 있는 요소를 알지 못하도록 막는다.
- 아키텍처의 목표는 필요한 시스템을 만들고 유지하는 데 드는 인적 자원을 최소화 하는 것이며 이러한 인적 자원의 효율을 떨어뜨리는 요인은 바로 ‘결합 coupling’이다.

## 17-1. 두 가지 슬픈 이야기

- P사는 서버 팜을 필요로 하는 시스템을 한 번도 판매하지 못했다. 배포했던 시스템은 모두 단일 서버였다. 존재한 적도 없고 존재하지 않을 서버 팜을 기대하며 단일 서버에서 추가 작업들을 지속했다. 이 비극은 아키텍트가 너무 이르게 결정을 내림으로써 개발 비용을 엄청나게 가중시킨 사례이다.
- W사도 마찬가지이다. SOA를 약속하는 일련의 도구들을 너무 일찍 채택하여 적용했다. 즉, 거대한 일련의 도메인 객체 서비스를 너무 이른 시기에 채택했다. 이러한 실수로 인적시간, 그것도 엄청난 양의 인적 시간에 따른 비용이 SOA의 소용돌이에 휩쓸려 떠내려 갔다.

## 17-2. Fitness

- 저자가 아들과 함께 개발했던 Fitness
- Fitness 개발 초기에 업무 규칙과 데이터베이스 사이에 경계선 boundary line을 그었다. 이 경계선을 통해 업무 규칙은 데이터 접근 메서드 외에는 데이터베이스에 관해서 어떤 것도 알지 못하게 되었다.
- 이러한 결정으로 일년이 훨씬 넘는 기간동안 데이터베이스를 선택하고 구현하는 일을 연기할 수 있었다.
- 간단히 말해서 경계선을 긋는 행위는 결정을 늦추고 연기하는 데 도움이 되고, 궁극적으로는 시간을 엄청나게 절약해준다. 즉, 좋은 아키텍처라면 반드시 해야하는 일인 것이다.

## 17-3. 어떻게 선을 그을까? 그리고 언제 그을까?

- 관련이 있는 것과 없는 것 사이에 선을 긋는다.
    - GUI, 업무규칙, 데이터베이스 각각은 서로 관련이 없으므로 각 사이에 선이 있어야 한다.
- 데이터베이스가 업무 규칙이랑 관련이 없다는데에 이해하지 못할 수 있다. But, 데이터베이스는 업무규칙이 간접적으로 사용할 수 있는 도구이므로 선이 있어야한다

## 17-4. 플러그인 아키텍처

- 데이터베이스와 GUI에 대해 내린 두 가지 결정을 하나로 합쳐서 보면, 컴포넌트 추가와 관련한 일종의 패턴이 만들어진다. 이 패턴은 시스템에서 서드파티 플러그인을 사용할 수 있게 한 바로 그 패턴과 동일하다.
- 사실상 소프트웨어 개발 기술의 역사는 플러그인을 손쉽게 생성하여 확장 가능하며 유지보수가 쉬운 시스템 아키텍처를 확립할 수 있게 만드는 방법에 대한 이야기이다.

![https://share-factory.tistory.com/32?category=970125](https://user-images.githubusercontent.com/61774575/194762610-b58a42a4-0607-43ee-84ff-ec01b2ce1b34.png)

[https://share-factory.tistory.com/32?category=970125](https://share-factory.tistory.com/32?category=970125)

- 사용자 인터페이스나 데이터베이스가 플러그인 형태로 고려되었기에 어떤 것으로든 교체할 수 있다. 물론 교체작업이 쉬운 일은 아니겠으나 최소한 변경작업이 현실성 있도록 만들어졌다.
- 이 경계는 변경의 축이 있는 지점에 그어지며 이 것은 단일 책임 원칙에 해당한다. 단일책임 원칙은 어디에 경계를 그어야 할지를 알려준다.

## 17-5. 결론

- 소프트웨어 아키텍처에서 경계선을 그리려면 먼저 시스템을 ‘컴포넌트 단위로 분할’ 해야한다. 일부 컴포넌트는 핵심 업무 규칙에 해당한다. 나머지 컴포넌트는 플러그인으로, 핵심 업무와는 직접적인 관련이 없지만 필수 기능을 포함한다. 그런 다음 컴포넌트 사이의 화살표가 특정 방향, 즉 핵심 업무를 향하도록 이들 컴포넌트의 소스를 배치한다.
- 더불어 의손성 화살표는 저수준 세부사항에서 고수준의 추상화를 향하도록 배치해야한다.
